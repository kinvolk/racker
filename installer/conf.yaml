version: 0.6
modules:
  - name: .
    assets:
    - type: file
      path: ./racker
    - type: file
      path: ../bootstrap
    - type: file
      url: https://releases.hashicorp.com/terraform/0.13.6/terraform_0.13.6_linux_amd64.zip
      sha256: 55f2db00b05675026be9c898bdd3e8230ff0c5c78dd12d743ca38032092abfc9
      dest-filename: terraform.zip
    - type: git
      url: https://github.com/kinvolk/lokomotive.git
      branch: "kai/baremetal"
    build-commands:
    - mkdir bin && mv racker bin/ && unzip terraform.zip -d bin/ && rm terraform.zip && cd lokomotive && make && cp lokoctl ../bin/ && cd .. && rm -rf lokomotive
